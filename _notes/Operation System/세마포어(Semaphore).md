---
title: 세마포어(Semaphore)
category: Operation System
layout: note
---
세마포어는 여러 프로세스 또는 스레드가 공유 자원에 동시에 접근하는 것을 제어하기 위한 동기화 메커니즘이다. 세마포어는 정수 값을 가지는 변수로, 이 값을 통해 공유 자원에 접근할 수 있는 프로세스/스레드의 수를 제한한다. 
![[Pasted image 20250324154015.png]]

동작 방식:
1. 초기화: 세마포어는 초기값(일반적으로 0보다 큰 정수)을 가진다. 이 값은 동시에 공유 자원에 접근할 수 있는 프로세스/스레드의 최대 허용 수를 나타낸다. 
2. P연산(Wait, Acquire): 프로세스/스레드가 공유 자원에 접근하려고 할 때 P 연산을 수행한다.
	세마포어 값을 1 감소시킨다.
	만약 세마포어 값이 0이 되면 (즉, 다른 프로세스/스레드가 이미 자원을 사용 중이면), 해당 프로세스/스레드는 대기 상태(Blocked)가 된다.
	세마포어 값이 0보다 크면, 프로세스/스레드는 공유 자원에 접근할 수 있다. 
3. V연산(Signal, Release): 프로세스/스레드가 공유 자원 사용을 완료하면 V연산을 수행한다. 
	세마포어 값을 1증가시킨다.
	만약 대기 중인 프로세스/스레드가 있다면, 그 중 하나를 깨워(Wake-up)공유 자원에 접근할 수 있게 한다. 

세마포어의 종류 :
- 이진 세마포어(Binary Semephore): 0 또는 1의 값만 가질 수 있다. 상호 배제(Mutual Exclusion, Mutex)를 구현하는 데 주로 사용된다. 즉, 한 번에 하나의 프로세스/스레드만 공유 자원에 접근할 수 있도록 한다. 

	![[Pasted image 20250324155129.png]]


- 카운팅 세마포어(Counting Semaphore): 0보다 큰 정수 값을 가질 수 있으며, 여러 개의 공유 자원에 대한 접근을 제어하는 데 사용된다. 예를 들어, 3개의 프린터가 있는 시스템에서 카운팅 세마포어를 사용하여 한 번에 최대 3개의 프로세스가 프린터를 사용할 수 있도록 제어한다. 

![[Pasted image 20250324155300.png]]